<link href="cases/case.add.css" rel="stylesheet">
<link href="cases/case.update.css" rel="stylesheet">
<link href="../node_modules/select2/dist/css/select2.min.css" rel="stylesheet">
<link href="../node_modules/select2-bootstrap-theme/dist/select2-bootstrap.min.css" rel="stylesheet">
<link href="../node_modules/trumbowyg/dist/ui/trumbowyg.min.css" rel="stylesheet">

<h1>Update Case</h1>

<div id="case-info-container"class="panel panel-default">
    
    <div class="panel-heading">
        <ul class="nav nav-pills">
            <li class="dropdown">
                <a class="dropdown-toggle" data-toggle="dropdown" href="#">
                  Options <span class="caret"></span>
                </a>
                <ul class="dropdown-menu">
                    <li><a id="case-options-delete" href="#">Delete</a></li>
                </ul>
            </li>
        </ul>
    </div>
    
    <div class="panel-body">
        <form name="add-case-form">
            <div class="col-md-8">
                
                <div class="form-group">
                    <label for="case-title">Title</label>
                    <input type="text" id="case-title" name="title" class="form-control" placeholder="Please enter a title">
                </div>

                <div class="form-group">
                    <label for="case-description">Description</label>
                    <textarea id="case-description" name="description" class="form-control" rows="3"></textarea>
                </div>
           
                <div class="form-group">
                    <label for="case-speciality">Speciality</label>
                    <select id="case-speciality" name="speciality" class="form-control" multiple="multiple">
                      <option value="Gastrointestinal">Gastrointestinal</option>
                      <option value="Musculoskeletal">Musculoskeletal</option>
                      <option value="Breast">Breast</option>
                      <option value="Chest">Chest</option>
                      <option value="Cardiovascular">Cardiovascular</option>
                      <option value="Paediatric">Paediatric</option>
                      <option value="Neuro, Head & Neck">Neuro, Head & Neck</option>
                      <option value="Genitourinary">Genitourinary</option>
                      <option value="Exam Tips">Exam Tips</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="case-complexity">Complexity</label>
                    <select id="case-complexity" name="complexity" class="form-control">
                      <option>Easy</option>
                      <option>Medium</option>
                      <option>Hard</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="case-author">Author</label>
                    <div id="case-author"></div>
                </div>
            </div>

            <div class="col-md-4">
                
                <div class="form-group">
                     <label for="case-video-embed">Current Video</label>
                    <iframe id="case-video-embed" src="" style="display:none;" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>
                </div>
                
                <div class="form-group">
                    <label for="browse">New Video</label>
                    
                    <div id="drop_zone">Drop video here</div>
                    
                    <br>
                    
                    <label class="btn btn-block btn-info">
                        Browse <input id="browse" name="video" type="file" style="display: none;">
                    </label>
                    
                    <div id="video-info" style="display:none;">
                        <span>Video file name:</span>
                        <span id="video-file-name"></span>
                    </div>
                    
                    <div id="video-error"></div>
                </div>
            </div>
            
            <div class="col-md-12 text-right">
                <button id="add-case" type="submit" class="btn btn-primary">Save</button>
            </div>
            
        </form>
       
    </div>
</div>
    
<div id="case-status-container"class="panel panel-default" style="display:none;">
    <div class="panel-body">
        
        <ul id="case-status-steps" class="list-unstyled">
            
            <li>
                <h4>Please wait the case is updated.</h4>
                
                <div class="alert alert-warning" role="alert">
                  <strong>Warning:</strong> Do not close the page or navigate away while the case is being updated.
                </div>
                
                <div class="alert alert-danger" role="alert" style="display:none;">
                  <strong>An error occurred while updating the case.</strong>
                </div>
            </li>
            
            <li id="video-upload-status" class="">
                <label>1. Upload video (this may take a while depending on the size of the video)</label>
                <span class="message"></span>
                
                <div id="progress-container" class="progress">
                    <div id="progress" class="progress-bar progress-bar-info active" role="progressbar" aria-valuenow="46" aria-valuemin="0" aria-valuemax="100" style="width: 0%">&nbsp;0%
                    </div>
                </div>
                
                <span class="error"></span>
            </li>
            
            <li id="video-thumbnail-status" class="">
                <label>2. Getting video thumbnails (this may take a while depending on how busy Vimeo is)</label>
                
                <div class="progress" style="display:none;">
                    <div class="progress-bar progress-bar-striped active" role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" style="width:100%">
                    </div>
                </div>
                
                <span class="message"></span>
                
                <span class="error"></span>
            </li>
            
            <li id="github-delete-status" class="">
                <label>3. Delete case information from GitHub</label>
                <span class="message"></span>
                <span class="error"></span>
            </li>
            
            <li id="github-write-status" class="">
                <label>4. Write case information to GitHub</label>
                <span class="message"></span>
            </li>
            
            <li id="db-write-status" class="">
                <label>5. Save case information</label>
                <span class="message"></span>
                <span class="error"></span>
            </li>
            
            <li id="vimeo-delete-status" class="">
                <label>6. Delete video from Vimeo</label>
                <span class="message"></span>
                <span class="error"></span>
            </li>
        </ul>
        
        <div id="case-status-sucess" class="alert alert-success" role="alert">
            <strong>Your case has been successfully updated.</strong>
            <a href="#/cases">View all cases</a>
        </div>
            
    </div>
</div>

<div id="case-info-error-container" class="panel panel-default" style="display:none;">
    <div class="panel-body">
        <h3 id="case-error" class="error"></h3>
    </div>
</div>

<script src="cases/case.model.js"></script>
<script src="cases/case.update.js"></script>